(this.webpackJsonpbishe=this.webpackJsonpbishe||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var s,i=n(19),c=n(80),o=(n(98),n(112)),r=n(111),l=n(114),u=n(88),d=n(115),a=n(110),j=n(113),h=n(116),b=n(117),x=n(118),f=n(119),p=n(0),y={host:"192.168.43.174",port:9e3,path:"/",debug:3,config:{iceServers:[{url:"stun:stun01.sipphone.com"},{url:"stun:stun.ekiga.net"},{url:"stun:stun.fwdnet.net"},{url:"stun:stun.ideasip.com"},{url:"stun:stun.iptel.org"},{url:"stun:stun.rixtelecom.se"},{url:"stun:stun.schlund.de"},{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"},{url:"stun:stunserver.org"},{url:"stun:stun.softjoys.com"},{url:"stun:stun.voiparound.com"},{url:"stun:stun.voipbuster.com"},{url:"stun:stun.voipstunt.com"},{url:"stun:stun.voxgratia.org"},{url:"stun:stun.xten.com"},{url:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"},{url:"turn:192.158.29.39:3478?transport=udp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"},{url:"turn:192.158.29.39:3478?transport=tcp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"}]}},g=n(81),m=n.n(g),O=n(13),v=o.a.Header,w=(o.a.Content,o.a.Footer),k=r.a.Title,C=r.a.Text,I="key"+Math.floor(1e6*Math.random());function E(){var e=Object(p.useState)(!1),t=Object(c.a)(e,2),n=t[0],i=t[1],r=Object(p.useState)(),g=Object(c.a)(r,2),E=g[0],S=g[1],z=Object(p.useCallback)((function(e){console.log("handleCall",e),!n&&i(!0);return navigator.getUserMedia({video:!0,audio:!0},(function(t){var n=document.getElementById("video1");n&&(n.srcObject=t,n.play()),e?e.answer(t):e=s.call(E,t),e.on("stream",(function(e){var t=document.getElementById("video2");t&&(t.srcObject=e,t.play())}))}),(function(){return console.log("error")})),e}),[E,n]),R=function(e){return function(t){try{console.log("receive data: ",t,"type:"+t.type),"conn_build"===t.type?l.a.confirm({title:"\u6536\u5230\u901a\u8bdd\u8bf7\u6c42",content:"\u6765\u81ea"+t.payload.key+"\u7684\u901a\u8bdd\u8bf7\u6c42",onCancel:function(){e.send({type:"refuse"}),setTimeout((function(){return e.close()}),1e3)},onOk:function(){e.send({type:"comfirm"})}}):"comfirm"===t.type?(console.log("comfirm"),u.b.success("\u5bf9\u65b9\u5df2\u63a5\u53d7\u9080\u8bf7"),z()):"refuse"===t.type&&(u.b.error("\u5bf9\u65b9\u5df2\u62d2\u7edd\u9080\u8bf7"),setTimeout((function(){return e.close()}),1e3))}catch(n){console.log("\u6240\u63a5\u53d7\u6570\u636e\u683c\u5f0f\u9519\u8bef")}}};return Object(p.useEffect)((function(){s||(s=new m.a(I,y),console.log("test",s),s.on("error",(function(){u.b.error("\u521d\u59cb\u5316\u8fde\u63a5\u5931\u8d25")})),s.on("open",(function(){u.b.success("\u81ea\u52a8\u6ce8\u518c\u6210\u529f")})),s.on("call",(function(e){z(e)})),s.on("connection",(function(e){e.on("data",R(e))})),s.on("close",(function(){n&&i(!1),u.b.error("\u901a\u8bdd\u5df2\u6302\u65ad")})))}),[n]),Object(p.useEffect)((function(){var e;return E&&((e=s.connect(E)).on("error",(function(){u.b.error("\u8fde\u63a5\u5931\u8d25")})),e.on("open",(function(){console.log("\u5df2\u53d1\u9001\u8fde\u63a5\u8bf7\u6c42"),e.send({type:"conn_build",payload:{key:I}})})),e.on("data",R(e))),function(){e&&e.close()}}),[E]),Object(O.jsxs)(o.a,{className:"layout",style:{minHeight:"100vh"},children:[Object(O.jsx)(v,{children:Object(O.jsx)("div",{style:{color:"white",fontSize:"20px"},children:Object(O.jsxs)(d.b,{size:"middle",children:[Object(O.jsx)(h.a,{}),"\u5728\u7ebf\u6388\u8bfe\u7cfb\u7edf"]})})}),Object(O.jsxs)("div",{className:"panel",style:{display:n?"none":"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:[Object(O.jsx)(a.a,{style:{width:"500px",height:"300px",margin:"32px"},children:Object(O.jsxs)(d.b,{direction:"vertical",children:[Object(O.jsx)(k,{level:4,children:"\u57fa\u672c\u4fe1\u606f"}),Object(O.jsxs)("div",{style:{fontSize:"16px"},children:["\u4e2a\u4ebaID\uff1a",Object(O.jsx)(C,{type:"secondary",children:I})]}),Object(O.jsxs)("div",{style:{fontSize:"16px"},children:["\u5728\u7ebf\u65f6\u957f\uff1a",Object(O.jsx)(C,{type:"secondary",children:"<10\u5206\u949f"})]})]})}),Object(O.jsx)(a.a,{style:{width:"500px",height:"300px"},children:Object(O.jsxs)(d.b,{direction:"vertical",style:{width:"100%"},children:[Object(O.jsx)(k,{level:4,children:"\u53d1\u8d77\u804a\u5929"}),Object(O.jsx)("div",{children:Object(O.jsx)(j.a.Search,{onSearch:function(e){return S(e)},placeholder:"\u8bf7\u8f93\u5165\u5bf9\u65b9\u7684ID"})})]})})]}),Object(O.jsxs)("div",{className:"videos",style:{display:n?"":"none"},children:[Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:[Object(O.jsx)("div",{style:{margin:"32px"},children:Object(O.jsx)("video",{style:{width:"100%",height:"100%"},id:"video1"})}),Object(O.jsx)("div",{style:{margin:"32px"},children:Object(O.jsx)("video",{style:{width:"100%",height:"100%"},id:"video2"})})]}),Object(O.jsx)("div",{style:{position:"fixed",right:"0",bottom:"100px",padding:"16px"},children:Object(O.jsxs)(d.b,{style:{width:"100%"},direction:"vertical",size:"large",children:[Object(O.jsxs)("div",{onClick:function(){s.destroyed(),s=void 0,i(!1)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"24px",color:"white",width:"48px",height:"48px",background:"#1890ff",borderRadius:"100%",marginRight:"16px"},children:Object(O.jsx)(b.a,{})}),"\u6302\u65ad\u901a\u8bdd"]}),Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"24px",color:"white",width:"48px",height:"48px",background:"#1890ff",borderRadius:"100%",marginRight:"16px"},children:Object(O.jsx)(x.a,{})}),"\u5f00\u542f\u767d\u677f"]}),Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"24px",color:"white",width:"48px",height:"48px",background:"#1890ff",borderRadius:"100%",marginRight:"16px"},children:Object(O.jsx)(f.a,{})}),"\u53d1\u9001\u6587\u4ef6"]})]})})]}),Object(O.jsxs)(w,{style:{width:"100%",textAlign:"center",position:"fixed",left:"0",bottom:"0",background:"white"},children:[" ","\xa92021 Designed by Rui"]})]})}var S=document.getElementById("root");Object(i.render)(Object(O.jsx)(E,{}),S)},98:function(e,t,n){},99:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=99}},[[106,1,2]]]);
//# sourceMappingURL=main.4cc823ee.chunk.js.map